<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
</head>

<body id="coloredDiv">
    <h1>This is heading 1</h1>
    <h2>This is heading 2</h2>
    <h3>This is heading 3</h3>

    <iframe id="cardinal_collection_iframe" name="collectionIframe" height="10" width="10"
        style="display: none;"></iframe>
    <form id="cardinal_collection_form" method="POST" target="collectionIframe"
        action=https://centinelapistag.cardinalcommerce.com/V1/Cruise/Collect>
        <input id="cardinal_collection_form_input" type="hidden" name="JWT"
            value="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIxMGJlZjI2ZS02Mjg5LTQ0MDMtYjFlMS0yNjYzNGI4YjdlNDQiLCJpYXQiOjE2OTExMjk3ODMsImlzcyI6IjVkZDgzYmYwMGU0MjNkMTQ5OGRjYmFjYSIsImV4cCI6MTY5MTEzMzM4MywiT3JnVW5pdElkIjoiNWI5YzRiYjNmZjYyNmIxMzQ0ODEwYTAxIiwiUmVmZXJlbmNlSWQiOiIzZDk5NjUwNy02NGM4LTQ4MTQtYTJhYS0wNGUwOWFhOGVhNWUifQ.DQ1CWx3TTtugqSu-mdj0YtvxmQJcPCyxzBIQCvdbNZw">
    </form>

    <button type="button" onclick="submit()" style="width: 180px; height: 50px;">Submit</button>

    <script src="script.js"></script>
</body>

<script>

    window.onload = function () {
        var cardinalCollectionForm = document.querySelector('#cardinal_collection_form');
        if (cardinalCollectionForm) // form exists 
            cardinalCollectionForm.submit();

    };

    window.addEventListener("message", function (event) {
        if (event.origin === "https://centinelapistag.cardinalcommerce.com") {
            JavascriptChannel.postMessage(event.data);
        }
    }, false);
</script>

</html>

<script>
    window.onload = function () {
        var cardinalCollectionForm = document.querySelector('#cardinal_collection_form');
        if (cardinalCollectionForm) {
            cardinalCollectionForm.submit();
            JSChannel.postMessage("JSChannel: sent");
        } // form exists 
    };

    window.addEventListener("message", function (event) {
        if (event.origin === "https://centinelapistag.cardinalcommerce.com") {
            JSChannel.postMessage("JSChannel: received");
            JSChannel2.postMessage(event.data);
        }
    }, false);
</script>